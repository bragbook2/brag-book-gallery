@charset "UTF-8";

// -----------------------------------------------------------------------------
// components / images / index
// -----------------------------------------------------------------------------

@use 'shared';
@use 'paired';

.brag-book-case-image-container {
	position: relative;
	width: 100%;
	padding-top: 75%;
	background: var(--gray-100);
	overflow: hidden
}

.brag-book-case-images-split {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: flex
}

.brag-book-case-image-before,
.brag-book-case-image-after {
	position: relative;
	width: 50%;
	height: 100%;
	overflow: hidden;

	&::after {
		content: "";
		position: absolute;
		top: 0;
		width: 1px;
		height: 100%;
		background: var(--wp--custom--brag-book-gallery--color--white,#FFF)
	}
}

.brag-book-case-image-before {
	&::after {
		right: 0
	}
}

.brag-book-case-image-label {
	position: absolute;
	top: var(--wp--custom--brag-book-gallery--spacer--sm);
	left: var(--wp--custom--brag-book-gallery--spacer--sm);
	z-index: 2;
	background: rgba(0,0,0,.7);
	color: var(--wp--custom--brag-book-gallery--color--white,#FFF);
	padding: var(--wp--custom--brag-book-gallery--spacer) var(--wp--custom--brag-book-gallery--spacer--sm);
	border-radius: var(--wp--custom--brag-book-gallery--spacer);
	font-size: var(--wp--custom--brag-book-gallery--spacer--md);
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: .05em
}

.brag-book-case-image-after .brag-book-case-image-label {
	left: auto;
	right: var(--wp--custom--brag-book-gallery--spacer--sm)
}

.brag-book-case-image-single {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%
}

.brag-book-case-image-single img,.brag-book-case-images-split img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	transition: transform .3s ease
}

.brag-book-case-card:hover .brag-book-case-image-single img,.brag-book-case-card:hover .brag-book-case-images-split img {
	transform: scale(1.05)
}

.brag-book-case-image-placeholder {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--gray-100);
	color: var(--wp--custom--brag-book-gallery--color--grey)
}


.brag-book-gallery-case-images.single-image img {
	opacity: 1;
	width: 100%;
	height: auto;
}

.brag-book-gallery-before-image,.brag-book-gallery-after-image,.brag-book-gallery-before-placeholder,.brag-book-gallery-after-placeholder {
	flex: 1;
	position: relative
}

.brag-book-gallery-image-container {
	position: relative;
	width: 100%;
	overflow: hidden;
	border-top-right-radius: var(--wp--custom--brag-book-gallery--rounded,4px);
	border-top-left-radius: var(--wp--custom--brag-book-gallery--rounded,4px);
}

.brag-book-gallery-placeholder-container {
	position: relative;
	width: 100%;
	padding-bottom: 75%;
	overflow: hidden;
	display: flex;
	align-items: center;
	justify-content: center
}

.brag-book-gallery-placeholder-container span {
	position: absolute;
	color: #999
}

.brag-book-gallery-skeleton-loader {
	position: absolute;
	inset: 0;
	background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
	background-size: 200% 100%;
	animation: skeleton-loading 1.5s infinite
}

@keyframes skeleton-loading {
	0% {
		background-position: -200% 0
	}

	100% {
		background-position: 200% 0
	}
}

.brag-book-gallery-picture {
	display: flex;
}

.brag-book-gallery-image-label {
	position: absolute;
	top: 8px;
	left: 8px;
	background: rgba(0,0,0,.7);
	color: #fff;
	padding: 4px 8px;
	border-radius: 4px;
	font-size: 12px;
	z-index: 2
}

.brag-book-gallery-case-images img {
	width: 100%;
	height: auto;
	opacity: 0;
	transition: opacity .3s ease
}

.brag-book-gallery-after-image .brag-book-gallery-item-actions {
	position: absolute;
	top: 8px;
	right: 8px;
	display: flex;
	gap: 8px;
	z-index: 30;
	opacity: 0;
	visibility: hidden;
	transition: all .3s ease;
	pointer-events: none
}

.brag-book-gallery-after-image:hover .brag-book-gallery-item-actions,.brag-book-gallery-after-image:focus-within .brag-book-gallery-item-actions {
	opacity: 1;
	visibility: visible;
	pointer-events: auto
}

.brag-book-gallery-after-image:has(.brag-book-gallery-favorite-button[data-favorited=true]) .brag-book-gallery-item-actions {
	opacity: 1;
	visibility: visible;
	pointer-events: auto
}

// Single image cards - buttons always visible and clickable
.brag-book-gallery-case-images.single-image .brag-book-gallery-item-actions {
	position: absolute;
	top: 8px;
	right: 8px;
	display: flex;
	gap: 8px;
	opacity: 1;
	visibility: visible;
	pointer-events: auto;
	z-index: 3; // Higher than V2 overlay (z-index: 2)
}

// Case card carousel (V2/V3 cards)
.brag-book-gallery-image-container {
	position: relative;

	.brag-book-gallery-case-carousel {
		display: flex;
		overflow-x: auto;
		overflow-y: hidden;
		scroll-snap-type: x mandatory;
		scroll-behavior: smooth;
		scrollbar-width: none; // Firefox
		-ms-overflow-style: none; // IE/Edge
		gap: 0;

		&::-webkit-scrollbar {
			display: none; // Chrome/Safari
		}

		.brag-book-gallery-picture {
			flex: 0 0 100%;
			width: 100%;
			scroll-snap-align: start;
			scroll-snap-stop: always;

			img {
				width: 100%;
				height: auto;
				display: block;
			}
		}
	}

	.brag-book-gallery-case-carousel-pagination {
		position: absolute;
		bottom: var(--wp--custom--brag-book-gallery--spacer--sm, 8px);
		left: 50%;
		transform: translateX(-50%);
		display: flex;
		justify-content: center;
		gap: var(--wp--custom--brag-book-gallery--spacer--sm, 8px);
		padding: 0;
		z-index: 10;
		background: transparent;
	}
}

.brag-book-gallery-case-carousel-dot {
	width: var(--wp--custom--brag-book-gallery--spacer--lg, 16px);
	height: var(--wp--custom--brag-book-gallery--spacer, 4px);
	border-radius: 10em;
	background: var(--wp--custom--brag-book-gallery--color--light-grey);
	border: none;
	cursor: pointer;
	padding: 0;
	transition: var(--wp--custom--brag-book-gallery--transition);
	text-decoration: none;
	display: block;
	position: relative;

	&::after {
		content: '';
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: var(--wp--custom--brag-book-gallery--spacer--lg, 16px);
		height: var(--wp--custom--brag-book-gallery--spacer, 4px);
		border-radius: 50%;
		background: transparent;
	}

	&:focus-visible {
		outline: none;
	}

	&:hover {
		background: var(--wp--custom--brag-book-gallery--color--grey);
		transform: scale(1.2);
	}

	&:target,
	&:focus,
	&.is-active {
		background: var(--wp--custom--brag-book-gallery--color--black);
		width: calc(8 * var(--wp--custom--brag-book-gallery--spacer, 4px));
		border-radius: 10em;
	}
}
