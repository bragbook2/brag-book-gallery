!function(){"use strict";void 0===window.BRAGbookSyncAdmin&&(window.BRAGbookSyncAdmin=class{constructor(){this.config="undefined"!=typeof bragBookSync?bragBookSync:{},this.ajaxUrl=this.config.ajax_url||"/wp-admin/admin-ajax.php",this.nonces={sync:this.config.sync_nonce||"",general:this.config.nonce||"",testAuto:this.config.test_auto_nonce||"",clearLog:this.config.clear_log_nonce||"",delete:this.config.delete_nonce||""},this.messages=this.config.messages||{},this.syncInProgress=!1,this.progressTimer=null,this.syncStartTime=null,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}init(){this.bindSyncControls(),this.bindHistoryControls(),this.bindProgressHandlers(),this.setupNoticeObserver(),this.setupExitWarning(),this.checkExistingSync()}bindSyncControls(){}bindHistoryControls(){document.querySelectorAll(".view-details").forEach(t=>{t.addEventListener("click",t=>{const e=t.target.getAttribute("data-details");this.showSyncDetails(e)})}),document.querySelectorAll(".delete-sync-record").forEach(t=>{t.addEventListener("click",t=>{const e=t.target.getAttribute("data-sync-id"),s=t.target.closest("tr"),n=s?s.querySelector("td:first-child"):null,r=n?n.textContent.trim():"this sync record";this.deleteSyncRecord(e,r)})})}bindProgressHandlers(){}async checkExistingSync(){try{const t=new FormData;t.append("action","brag_book_get_detailed_progress"),t.append("nonce",this.nonces.general);const e=await fetch(this.ajaxUrl,{method:"POST",body:t}),s=await e.json();s.success&&"idle"!==s.data.stage?(this.updateSyncsInProgress([s.data]),this.setSyncInProgress(!0),this.showProgress(),this.updateProgress(s.data.current_step,s.data.overall_percentage,s.data.procedure_progress.percentage,s.data.recent_cases||[])):(this.updateSyncsInProgress([]),this.setSyncInProgress(!1))}catch(t){console.error("BRAGbook Sync Admin: Error checking existing sync:",t),this.updateSyncsInProgress([]),this.setSyncInProgress(!1)}}async resumeSync(){try{const t=new FormData;t.append("action","brag_book_full_sync"),t.append("nonce",this.nonces.sync);const e=await fetch(this.ajaxUrl,{method:"POST",body:t}),s=await e.json();this.handleSyncResult(s)}catch(t){console.error("Resume sync error:",t),this.handleSyncError(t.message)}}updateSyncsInProgress(t){const e=document.getElementById("no-active-syncs"),s=document.getElementById("active-syncs-list");if(e&&s)if(0===t.length)e.style.display="block",s.style.display="none",s.innerHTML="";else{e.style.display="none",s.style.display="block";let n="";t.forEach((t,e)=>{const s=`sync-${e}`,r=Math.round(t.overall_percentage||0),o=t.current_step||"Processing...";n+=`\n\t\t\t\t\t\t<div class="brag-book-gallery-active-sync" data-sync-id="${s}">\n\t\t\t\t\t\t\t<div class="sync-header">\n\t\t\t\t\t\t\t\t<strong>Data Sync in Progress</strong>\n\t\t\t\t\t\t\t\t<button type="button" class="button button-secondary button-small stop-individual-sync" data-sync-id="${s}">\n\t\t\t\t\t\t\t\t\tStop Sync\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="sync-progress-summary">\n\t\t\t\t\t\t\t\t<div class="progress-text">\n\t\t\t\t\t\t\t\t\t<span class="current-step">${o}</span>\n\t\t\t\t\t\t\t\t\t<span class="progress-percentage">${r}%</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="progress-bar-container">\n\t\t\t\t\t\t\t\t\t<div class="progress-bar">\n\t\t\t\t\t\t\t\t\t\t<div class="progress-fill" style="width: ${r}%"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`}),s.innerHTML=n,document.querySelectorAll(".stop-individual-sync").forEach(t=>{t.addEventListener("click",()=>this.stopSync())})}}async stopSync(){try{const t=new FormData;t.append("action","brag_book_stop_sync"),t.append("nonce",this.nonces.general);const e=await fetch(this.ajaxUrl,{method:"POST",body:t}),s=await e.json();s.success?(this.showNotice(s.data.message,"info"),this.setSyncInProgress(!1)):this.showNotice(s.data.message,"error")}catch(t){console.error("Stop sync error:",t),this.showNotice("Failed to stop sync: "+t.message,"error")}}async deleteSyncRecord(t,e){const s=this.messages.confirm_delete_record||"Are you sure you want to delete this sync record?";if(confirm(`${s}\n\nRecord: ${e}`))try{const e=new FormData;e.append("action","brag_book_delete_sync_record"),e.append("nonce",this.nonces.delete),e.append("sync_id",t);const s=await fetch(this.ajaxUrl,{method:"POST",body:e}),n=await s.json();n.success?(this.showNotice(n.data.message,"success"),setTimeout(()=>window.location.reload(),1500)):this.showNotice(n.data.message,"error")}catch(t){console.error("Delete record error:",t),this.showNotice("Failed to delete sync record: "+t.message,"error")}}showSyncDetails(t){try{const e=JSON.parse(t);if(e.activity_log&&"object"==typeof e.activity_log)this.showActivityLogReport(e);else{const t=JSON.stringify(e,null,2);alert("Sync Details:\n\n"+t)}}catch(e){alert("Sync Details:\n\n"+t)}}showActivityLogReport(t){const e=document.createElement("div");e.style.cssText="\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tbackground: rgba(0,0,0,0.8);\n\t\t\t\tz-index: 10000;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t";const s=document.createElement("div");s.style.cssText="\n\t\t\t\tbackground: #fff;\n\t\t\t\tpadding: 20px;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\tmax-width: 80%;\n\t\t\t\tmax-height: 80%;\n\t\t\t\toverflow-y: auto;\n\t\t\t\tbox-shadow: 0 4px 20px rgba(0,0,0,0.3);\n\t\t\t";let n='<h2 style="margin-top: 0;">Sync Activity Report</h2>';if(n+="<h3>Summary</h3>",n+='<div style="background: #f9f9f9; padding: 10px; border-radius: 3px; margin-bottom: 20px;">',n+=`<p><strong>Procedures Created:</strong> ${t.created||0}</p>`,n+=`<p><strong>Procedures Updated:</strong> ${t.updated||0}</p>`,n+=`<p><strong>Cases Created:</strong> ${t.cases_created||0}</p>`,n+=`<p><strong>Cases Updated:</strong> ${t.cases_updated||0}</p>`,n+=`<p><strong>Total Cases Processed:</strong> ${t.total_processed||0}</p>`,t.duration&&(n+=`<p><strong>Duration:</strong> ${t.duration}</p>`),n+="</div>",t.activity_log){n+="<h3>Activity Log</h3>",n+='<div style="background: #f1f1f1; padding: 10px; border-radius: 3px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">';const e=t.activity_log;e.current_step&&(n+=`<div style="margin-bottom: 10px;"><strong>Final Step:</strong> ${e.current_step}</div>`),e.overall_percentage&&(n+=`<div style="margin-bottom: 10px;"><strong>Progress:</strong> ${e.overall_percentage}% complete</div>`),e.updated_at&&(n+=`<div style="margin-bottom: 10px;"><strong>Completed:</strong> ${e.updated_at}</div>`),n+="</div>"}n+='<div style="text-align: right; margin-top: 20px;">',n+='<button id="close-sync-report" style="background: #0073aa; color: white; border: none; padding: 8px 16px; border-radius: 3px; cursor: pointer;">Close</button>',n+="</div>",s.innerHTML=n,e.appendChild(s),document.body.appendChild(e),document.getElementById("close-sync-report").addEventListener("click",()=>{document.body.removeChild(e)}),e.addEventListener("click",t=>{t.target===e&&document.body.removeChild(e)})}setSyncInProgress(t){this.syncInProgress=t,t?this.startProgressPolling():this.stopProgressPolling()}showProgress(){const t=document.getElementById("sync-progress");t&&(t.style.display="block");const e=document.getElementById("sync-progress-details");e&&(e.style.display="block")}hideProgress(){const t=document.getElementById("sync-progress");t&&(t.style.display="none");const e=document.getElementById("sync-progress-details");e&&(e.style.display="none")}updateProgress(t,e,s,n=[]){const r=document.getElementById("sync-overall-fill"),o=document.getElementById("sync-overall-percentage"),a=document.getElementById("sync-current-operation"),i=document.getElementById("sync-current-fill"),c=document.getElementById("sync-current-percentage"),d=document.getElementById("sync-status-text"),l=document.getElementById("sync-time-elapsed");r&&(r.style.width=e+"%",r.setAttribute("data-percentage",Math.round(e)+"%")),o&&(o.textContent=Math.round(e)+"%");const g=this.syncStartTime?Math.floor((Date.now()-this.syncStartTime)/1e3):0;if(l){const t=Math.floor(g/60),e=g%60;let s="Time: ";s+=t>0?`${t}m ${e}s`:`${e}s`,l.textContent=s}a&&(a.textContent=t),i&&(i.style.width=s+"%"),c&&(c.textContent=Math.round(s)+"%"),d&&(100===e?(d.textContent="Completed",d.style.color="#22c55e"):e>0?(d.textContent="In Progress",d.style.color="#D94540"):(d.textContent="Ready",d.style.color="#1e293b"));const p=document.querySelector(".sync-progress-overview");p&&(p.classList.remove("sync-in-progress","sync-completed","sync-error"),100===e?p.classList.add("sync-completed"):e>0&&p.classList.add("sync-in-progress"));const u=document.querySelector(".sync-status-badge");u&&(100===e?(u.className="sync-status-badge completed",u.innerHTML='<span class="status-indicator"></span>Completed'):e>0&&(u.className="sync-status-badge syncing",u.innerHTML='<span class="status-indicator active"></span>Syncing')),this.updateProgressLog(n)}setProgressBarsCompleted(){const t=document.getElementById("sync-overall-fill"),e=document.getElementById("sync-current-fill");t&&(t.style.backgroundColor="#00a32a",t.style.transition="background-color 0.3s ease"),e&&(e.style.backgroundColor="#00a32a",e.style.transition="background-color 0.3s ease"),document.querySelectorAll(".progress-fill").forEach(t=>{t.style.backgroundColor="#00a32a",t.style.transition="background-color 0.3s ease"})}formatStageLabel(t){switch(t){case"procedures":return"Procedure Synchronization";case"cases":return"Case Creation";case"completed":return"Sync Completed";case"idle":return"Idle";default:return t.charAt(0).toUpperCase()+t.slice(1)}}addProgressLogEntry(t,e="success"){const s=document.getElementById("sync-progress-items");if(!s)return;const n=document.createElement("li");n.className=`sync-log-item sync-log-item--${e}`;const r=(new Date).toLocaleTimeString();switch(n.textContent=`[${r}] ${t}`,e){case"success":n.style.cssText="padding: 5px 10px; margin: 1px 0; background: #fff; border-left: 3px solid #00a32a; font-size: 11px; color: #333;";break;case"info":n.style.cssText="padding: 5px 10px; margin: 1px 0; background: #f0f0f1; border-left: 3px solid #72aee6; font-size: 11px; color: #555;";break;case"warning":n.style.cssText="padding: 5px 10px; margin: 1px 0; background: #fff8e1; border-left: 3px solid #ff9800; font-size: 11px; color: #333;";break;case"error":n.style.cssText="padding: 5px 10px; margin: 1px 0; background: #ffebee; border-left: 3px solid #f44336; font-size: 11px; color: #333;"}s.appendChild(n),s.scrollTop=s.scrollHeight}updateProgressLog(t){t&&t.length>0&&t.forEach(t=>{this.addProgressLogEntry(`âœ“ ${t}`,"success")})}startProgressPolling(){this.progressTimer&&clearInterval(this.progressTimer);let t="",e="",s="",n=0;this.progressTimer=setInterval(async()=>{try{const r=new FormData;r.append("action","brag_book_get_detailed_progress"),r.append("nonce",this.nonces.general);const o=await fetch(this.ajaxUrl,{method:"POST",body:r}),a=await o.json();if(a.success&&"idle"!==a.data.stage){const r=a.data;if("completed"===r.stage)return this.addProgressLogEntry("ðŸŽ‰ Synchronization completed successfully!","success"),this.updateProgress(r.current_step,r.overall_percentage,r.procedure_progress.percentage,r.recent_cases||[]),this.setProgressBarsCompleted(),this.setSyncInProgress(!1),void this.updateSyncsInProgress([]);if(t!==r.stage){const e=this.formatStageLabel(r.stage);this.addProgressLogEntry(`[STAGE] ${e}`,"info"),t=r.stage}e!==r.current_step&&(this.addProgressLogEntry(`â³ ${r.current_step}`,"info"),e=r.current_step),r.current_procedure&&s!==r.current_procedure&&(this.addProgressLogEntry(`ðŸ“‹ Processing procedure: ${r.current_procedure}`,"info"),s=r.current_procedure),r.taxonomy_mapping_issues&&r.taxonomy_mapping_issues.length>0&&r.taxonomy_mapping_issues.forEach(t=>{this.addProgressLogEntry(`Taxonomy: ${t}`,"warning")}),r.overall_percentage-n>=5&&(this.addProgressLogEntry(`Overall progress: ${Math.round(r.overall_percentage)}%`,"info"),n=r.overall_percentage),r.errors&&r.errors.length>0&&r.errors.forEach(t=>{this.addProgressLogEntry(`Error: ${t}`,"error")}),r.warnings&&r.warnings.length>0&&r.warnings.forEach(t=>{this.addProgressLogEntry(`Warning: ${t}`,"warning")}),this.updateProgress(r.current_step,r.overall_percentage,r.procedure_progress.percentage,r.recent_cases||[]),this.updateSyncsInProgress([r])}else a.success&&"idle"===a.data.stage&&(this.addProgressLogEntry("Synchronization completed successfully","success"),this.updateProgress("Sync Completed",100,100,[]),this.setProgressBarsCompleted(),this.setSyncInProgress(!1),this.updateSyncsInProgress([]))}catch(t){console.error("Progress polling error:",t),this.addProgressLogEntry(`Polling error: ${t.message}`,"error")}},1500)}stopProgressPolling(){this.progressTimer&&(clearInterval(this.progressTimer),this.progressTimer=null)}handleSyncResult(t){if(t.success){if(t.data&&t.data.needs_resume){this.addProgressLogEntry("â¸ Sync paused to prevent timeout - resuming...","warning");const e=t.data.progress||0;return this.updateProgress(t.data.message||"Resuming sync...",e,e,[]),(t.data.created>0||t.data.updated>0)&&(this.addProgressLogEntry("Progress so far:","info"),t.data.created>0&&this.addProgressLogEntry(`   â€¢ Procedures Created: ${t.data.created}`,"info"),t.data.updated>0&&this.addProgressLogEntry(`   â€¢ Procedures Updated: ${t.data.updated}`,"info"),t.data.cases_created>0&&this.addProgressLogEntry(`   â€¢ Cases Created: ${t.data.cases_created}`,"info"),t.data.cases_updated>0&&this.addProgressLogEntry(`   â€¢ Cases Updated: ${t.data.cases_updated}`,"info")),void setTimeout(()=>{this.addProgressLogEntry("â†» Continuing sync...","info"),this.resumeSync()},2e3)}if(this.addProgressLogEntry("ðŸŽ‰ Sync completed successfully!","success"),this.updateProgress("Sync Completed",100,100,[]),this.setProgressBarsCompleted(),t.data){const e=t.data;this.addProgressLogEntry("Final Statistics:","info"),this.addProgressLogEntry(`   â€¢ Procedures Created: ${e.created||0}`,"success"),this.addProgressLogEntry(`   â€¢ Procedures Updated: ${e.updated||0}`,"success"),this.addProgressLogEntry(`   â€¢ Cases Created: ${e.cases_created||0}`,"success"),this.addProgressLogEntry(`   â€¢ Cases Updated: ${e.cases_updated||0}`,"success"),e.duration&&this.addProgressLogEntry(`   â€¢ Total Duration: ${e.duration}`,"info")}this.showNotice(this.messages.sync_complete||"Sync completed successfully!","success"),this.showResults(t.data),setTimeout(()=>window.location.reload(),5e3)}else this.handleSyncError(t.data?.message||"Unknown error occurred");this.setSyncInProgress(!1)}handleSyncError(t){this.setSyncInProgress(!1),this.addProgressLogEntry(`ðŸ’¥ Sync failed: ${t}`,"error"),this.showNotice(this.messages.sync_error+" "+t,"error")}showResults(t){const e=document.getElementById("sync-results"),s=document.getElementById("sync-results-content");if(e&&s){let n='<div class="brag-book-gallery-results">';n+=`<p><strong>Procedures Created:</strong> ${t.created||0}</p>`,n+=`<p><strong>Procedures Updated:</strong> ${t.updated||0}</p>`,n+=`<p><strong>Cases Created:</strong> ${t.cases_created||0}</p>`,n+=`<p><strong>Cases Updated:</strong> ${t.cases_updated||0}</p>`,t.duration&&(n+=`<p><strong>Duration:</strong> ${t.duration}</p>`),n+="</div>",s.innerHTML=n,e.style.display="block"}}showNotice(t,e="info"){const s=document.querySelector(".brag-book-gallery-notices");if(!s)return void console.log(e.toUpperCase()+": "+t);const n=document.createElement("div");n.className=`notice notice-${e} is-dismissible`,n.innerHTML=`<p>${t}</p>`,s.appendChild(n),this.autoDismissNotice(n)}autoDismissNotice(t){setTimeout(()=>{t.parentNode&&(t.style.transition="opacity 0.3s ease",t.style.opacity="0",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300))},5e3)}setupNoticeObserver(){const t=document.querySelector(".brag-book-gallery-notices");t&&(t.querySelectorAll(".notice").forEach(t=>{this.autoDismissNotice(t)}),new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{1===t.nodeType&&t.classList&&t.classList.contains("notice")&&this.autoDismissNotice(t)})})}).observe(t,{childList:!0,subtree:!0}))}setupExitWarning(){if(!document.querySelector(".brag-book-gallery-admin-wrap"))return;this.createExitWarningDialog(),this.boundBeforeUnload=t=>{if(this.syncInProgress)return t.preventDefault(),t.returnValue="",""},window.addEventListener("beforeunload",this.boundBeforeUnload);let t=!1;document.addEventListener("mousemove",e=>{if(!this.syncInProgress)return;const s=document.querySelector(".brag-book-gallery-admin-wrap");if(!s)return;const n=s.getBoundingClientRect();(e.clientX<n.left||e.clientX>n.right||e.clientY<n.top||e.clientY>n.bottom)&&!t&&(t=!0)}),document.addEventListener("click",e=>{if(!this.syncInProgress)return void(t=!1);const s=document.querySelector(".brag-book-gallery-admin-wrap");if(!s)return void console.error("BRAGbook Sync Admin: wrap not found during click");const n=s.getBoundingClientRect();if(e.clientX<n.left||e.clientX>n.right||e.clientY<n.top||e.clientY>n.bottom){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const t=e.target.closest("a"),s=t&&t.href?t.href:null;return this.showExitWarningDialog(s),!1}const r=e.target.closest("a");return r&&r.href&&!r.target&&!r.href.startsWith("#")&&window.location.href.split("?")[0]!==r.href.split("?")[0]?(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.showExitWarningDialog(r.href),!1):void 0},!0)}createExitWarningDialog(){const t=document.createElement("dialog");t.id="sync-exit-warning-dialog",t.className="sync-exit-warning-dialog",t.innerHTML='\n\t\t\t\t<div style="\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tborder-radius: 0.5rem;\n\t\t\t\t\tbox-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n\t\t\t\t\tmax-width: 28rem;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t">\n\t\t\t\t\t<div style="padding: 1.5rem;">\n\t\t\t\t\t\t<div style="display: flex; align-items: flex-start;">\n\t\t\t\t\t\t\t<div style="\n\t\t\t\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\t\theight: 3rem;\n\t\t\t\t\t\t\t\twidth: 3rem;\n\t\t\t\t\t\t\t\tborder-radius: 9999px;\n\t\t\t\t\t\t\t\tbackground-color: #FEF2F2;\n\t\t\t\t\t\t\t\tmargin-right: 1rem;\n\t\t\t\t\t\t\t">\n\t\t\t\t\t\t\t\t<svg style="height: 1.5rem; width: 1.5rem; color: #DC2626;" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n\t\t\t\t\t\t\t\t\t<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style="flex: 1; margin-top: 0;">\n\t\t\t\t\t\t\t\t<h3 style="\n\t\t\t\t\t\t\t\t\tfont-size: 1.125rem;\n\t\t\t\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\t\t\t\tcolor: #111827;\n\t\t\t\t\t\t\t\t\tmargin: 0 0 0.5rem 0;\n\t\t\t\t\t\t\t\t">Sync In Progress</h3>\n\t\t\t\t\t\t\t\t<p style="\n\t\t\t\t\t\t\t\t\tfont-size: 0.875rem;\n\t\t\t\t\t\t\t\t\tcolor: #6B7280;\n\t\t\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t\t\t">A data synchronization is currently running. If you leave this page, the sync will be interrupted and may leave your data in an incomplete state.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style="\n\t\t\t\t\t\tbackground-color: #F9FAFB;\n\t\t\t\t\t\tpadding: 1rem 1.5rem;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tgap: 0.75rem;\n\t\t\t\t\t\tjustify-content: flex-end;\n\t\t\t\t\t\tborder-bottom-left-radius: 0.5rem;\n\t\t\t\t\t\tborder-bottom-right-radius: 0.5rem;\n\t\t\t\t\t">\n\t\t\t\t\t\t<button id="sync-exit-cancel" type="button" style="\n\t\t\t\t\t\t\tpadding: 0.5rem 1rem;\n\t\t\t\t\t\t\tborder: 1px solid #D1D5DB;\n\t\t\t\t\t\t\tborder-radius: 0.375rem;\n\t\t\t\t\t\t\tbackground-color: white;\n\t\t\t\t\t\t\tfont-size: 0.875rem;\n\t\t\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\t\t\tcolor: #374151;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\ttransition: background-color 0.2s;\n\t\t\t\t\t\t">Stay on Page</button>\n\t\t\t\t\t\t<button id="sync-exit-confirm" type="button" style="\n\t\t\t\t\t\t\tpadding: 0.5rem 1rem;\n\t\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\t\tborder-radius: 0.375rem;\n\t\t\t\t\t\t\tbackground-color: #DC2626;\n\t\t\t\t\t\t\tfont-size: 0.875rem;\n\t\t\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\ttransition: background-color 0.2s;\n\t\t\t\t\t\t">Leave Anyway</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t';const e=t.querySelector("#sync-exit-cancel"),s=t.querySelector("#sync-exit-confirm");e.addEventListener("mouseenter",()=>{e.style.backgroundColor="#F3F4F6"}),e.addEventListener("mouseleave",()=>{e.style.backgroundColor="white"}),s.addEventListener("mouseenter",()=>{s.style.backgroundColor="#B91C1C"}),s.addEventListener("mouseleave",()=>{s.style.backgroundColor="#DC2626"}),e.addEventListener("click",()=>{t.close(),this.pendingNavigation=null}),s.addEventListener("click",()=>{t.close(),this.pendingNavigation&&(window.location.href=this.pendingNavigation)});const n=document.createElement("style");n.textContent="\n\t\t\t\t.sync-exit-warning-dialog::backdrop {\n\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\t\t\t\tbackdrop-filter: blur(4px);\n\t\t\t\t}\n\t\t\t",document.head.appendChild(n),document.body.appendChild(t),this.exitWarningDialog=t}showExitWarningDialog(t=null){this.exitWarningDialog&&(this.pendingNavigation=t,this.exitWarningDialog.showModal())}},new window.BRAGbookSyncAdmin)}();